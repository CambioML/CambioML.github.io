# AI Translation Scripts

This directory contains automated translation tools for the Energent.ai website.

## AI Blog & Resource Translator

The `i18n-ai-translator.ts` script uses OpenAI's GPT-4 model to automatically translate blog posts, resources, and TypeScript translation files into multiple languages.

### Setup

1. **Install dependencies:**

   ```bash
   bun install
   ```

2. **Set your OpenAI API key:**

   ```bash
   export OPENAI_API_KEY="your-openai-api-key-here"
   ```

   Or create a `.env.local` file:

   ```
   OPENAI_API_KEY=your-openai-api-key-here
   ```

### Usage

#### NPM Scripts (Recommended)

```bash
# Translate blog posts only
bun run translate:blog

# Translate resources only
bun run translate:resources

# Translate TypeScript translation files only
bun run translate:translations

# Translate everything
bun run translate:all
```

#### Direct Script Usage

```bash
# Basic usage
bun run scripts/i18n-ai-translator.ts <command> [sourceLocale]

# Examples
bun run scripts/i18n-ai-translator.ts blog
bun run scripts/i18n-ai-translator.ts all en
bun run scripts/i18n-ai-translator.ts resources es
```

### Commands

- `blog` - Translate blog posts from `/blog/{locale}/` directories
- `resources` - Translate resource files from `/resources/{locale}/` directories
- `translations` - Translate TypeScript files from `/lib/translations/`
- `all` - Run all translation tasks

### Source Locales

- `en` - English (default)
- `es` - Spanish
- `fr` - French
- `zh` - Chinese (Simplified)

### Features

- ✅ **Smart skipping** - Won't overwrite existing translations
- ✅ **Markdown preservation** - Maintains all formatting, links, and structure
- ✅ **Technical accuracy** - Specialized prompts for technical content
- ✅ **Rate limiting** - Built-in delays to respect API limits
- ✅ **Error handling** - Continues processing if individual files fail
- ✅ **Directory creation** - Automatically creates locale directories
- ✅ **Progress tracking** - Clear console output with emojis

### Translation Quality

The script uses carefully crafted prompts that:

- Preserve all markdown formatting (headers, links, code blocks, images)
- Keep technical terms accurate and consistent
- Maintain the original tone and style
- Preserve URLs, image paths, and code examples
- Adapt cultural references appropriately
- Keep brand names unchanged
- Ensure natural reading in the target language

### File Structure

The script expects and maintains this structure:

```
blog/
├── en/
│   ├── post1.md
│   └── post2.md
├── es/
│   ├── post1.md  # ← Generated by script
│   └── post2.md  # ← Generated by script
├── fr/
└── zh/

resources/
├── en/
│   ├── guide1.md
│   └── guide2.md
├── es/
├── fr/
└── zh/

lib/translations/
├── en.ts
├── es.ts  # ← Generated by script
├── fr.ts  # ← Generated by script
└── zh.ts  # ← Generated by script
```

### Cost Estimation

The script uses GPT-4o-mini which is cost-effective for translation tasks. Estimated costs:

- Blog post (average 2KB): ~$0.01-0.02 per language
- Resource file (average 5KB): ~$0.02-0.05 per language
- Translation file (average 1KB): ~$0.005-0.01 per language

### Troubleshooting

**Error: "OPENAI_API_KEY environment variable is required"**

- Set your OpenAI API key as described in setup

**Error: "Source directory not found"**

- Ensure the source locale directory exists (e.g., `blog/en/`)

**Error: "Translation failed"**

- Check your API key and account credits
- Verify network connectivity
- Large files may hit token limits - consider splitting them

**Skipping files**

- Files are skipped if they already exist in the target locale
- Delete existing files if you want to retranslate them

### Contributing

When adding new locales:

1. Add the locale to `SUPPORTED_LOCALES` in the script
2. Add the language name to `LANGUAGE_NAMES` mapping
3. Update this README with the new locale
4. Test with a small file first

### Related Files

- `generate-sitemap.ts` - Generates sitemaps for all locales
- `../lib/i18n.ts` - i18n configuration and utilities
- `../lib/translations/` - TypeScript translation files

## GitHub Actions Automation

The repository includes **three automated GitHub Actions workflows** that automatically translate content when changes are made to English source files:

### 1. Auto-translate Blog Posts

**File:** `.github/workflows/translate-blog.yml`  
**Triggers:** Changes to `blog/en/**` files  
**Command:** `bun run translate:blog`

### 2. Auto-translate Resources

**File:** `.github/workflows/translate-resources.yml`  
**Triggers:** Changes to `resources/en/**` files  
**Command:** `bun run translate:resources`

### 3. Auto-translate Translation Files

**File:** `.github/workflows/translate-translations.yml`  
**Triggers:** Changes to `lib/translations/en.ts` file  
**Command:** `bun run translate:translations`

### Setup Instructions

1. **Add OpenAI API Key as Secret:**

   - Go to your GitHub repository settings
   - Navigate to `Secrets and variables` → `Actions`
   - Add a new repository secret named `OPENAI_API_KEY`
   - Set the value to your OpenAI API key

2. **Workflow Triggers:**
   All workflows automatically run when:

   - English source files are modified and pushed to `main` or `master` branch
   - Pull requests that modify English source files are opened
   - Manually triggered via "Actions" tab in GitHub

3. **What Each Workflow Does:**
   - **Blog Posts:** Translates new/modified blog posts in `blog/en/` to all languages
   - **Resources:** Translates new/modified resource files in `resources/en/` to all languages
   - **UI Translations:** Translates updated TypeScript translation strings to all language files
   - Commits and pushes the translated files back to the repository
   - Provides detailed commit messages showing what was translated

### Manual Triggering

You can manually trigger any translation workflow:

1. Go to the "Actions" tab in your GitHub repository
2. Select the desired workflow:
   - "Auto-translate Blog Posts"
   - "Auto-translate Resources"
   - "Auto-translate Translation Files"
3. Click "Run workflow"

### Supported Languages

All workflows translate to the same 22 supported languages:

- **European:** German (de), French (fr), Spanish (es), Italian (it), Portuguese (pt), Dutch (nl), Swedish (sv), Polish (pl), Norwegian (no), Danish (da), Finnish (fi), Czech (cs), Hungarian (hu), Romanian (ro)
- **Asian:** Chinese (zh), Japanese (ja), Korean (ko), Hindi (hi)
- **Other:** Russian (ru), Arabic (ar), Turkish (tr)

### Cost Considerations

- **Blog Posts:** ~$0.01-0.02 per post per language (6 posts × 18 new languages = ~$1-2)
- **Resources:** ~$0.02-0.05 per resource per language
- **UI Translations:** ~$0.005-0.01 per language (one large file)
- Only new or modified content is translated to minimize costs
- All workflows use smart skipping to avoid retranslating existing files

### Workflow Benefits

✅ **Automatic:** No manual intervention needed  
✅ **Smart:** Only translates changed content  
✅ **Cost-effective:** Skips existing translations  
✅ **Transparent:** Detailed commit messages and logs  
✅ **Reliable:** Error handling and validation  
✅ **Flexible:** Manual triggering available
